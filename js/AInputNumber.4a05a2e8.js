(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AInputNumber"],{8505:function(t,e,i){"use strict";i("fbe0")},b976:function(t,e,i){"use strict";i("c1fd")},c1fd:function(t,e,i){},ee71:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("MyInputNumber",{attrs:{label:"My Input Number",min:0,max:5,step:.1,precision:1,formatter:t=>t+"米",parser:t=>t.replace("米",""),placeholder:"Enter a number..."},on:{change:t.change},model:{value:t.inputNumberValue,callback:function(e){t.inputNumberValue=e},expression:"inputNumberValue"}}),e("p",[t._v("Formatted Input Number Value: "+t._s(t.inputNumberValue))]),e("div",{attrs:{role:"math","aria-label":"6除以4等于1.5"}},[e("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[e("mfrac",[e("mn",[t._v("6")]),e("mn",[t._v("4")])],1),e("mo",[t._v("=")]),e("mn",[t._v("1.5")])],1)],1)],1)},n=[],a=function(){var t=this,e=t._self._c;return e("div",[e("label",[t._v(t._s(t.label))]),e("div",{staticClass:"my-input-number"},[e("div",{staticClass:"my-input-number-handler-wrap"},[e("span",{staticClass:"my-input-number-handler my-input-number-handler-up",on:{click:function(e){return t.upStep(t.inputValue)}}},[e("i",{staticClass:"my-input-number-handler-up-inner"},[t._v("<")])]),e("span",{staticClass:"my-input-number-handler my-input-number-handler-down",on:{click:function(e){return t.downStep(t.inputValue)}}},[e("i",{staticClass:"my-input-number-handler-down-inner"},[t._v(">")])])]),e("div",{staticClass:"my-input-number-input-wrap"},[e("input",{ref:"inputRef",staticClass:"my-input-number-input",attrs:{min:t.min,max:t.max,step:t.step,placeholder:t.placeholder},domProps:{value:t.inputDisplayValue},on:{input:t.onChange,blur:t.onBlur}})])])])},u=[];const r=(t,e)=>e===t||"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t);var o={model:{prop:"value",event:"change"},props:{label:String,value:[Number,String],min:Number,max:Number,step:{type:Number,default:1},precision:Number,parser:Function,formatter:Function,placeholder:String},data(){const t=this.getValidValue(this.toNumber(this.value));return{inputDisplayValue:this.getInputDisplayValue(),inputValue:this.toPrecisionAsStep(t),sValue:t}},mounted(){const{inputDisplayValue:t,inputValue:e,sValue:i}=this;console.log("mounted ...",t,e,i)},computed:{},methods:{isValidProps(t){return void 0!==t&&null!==t},getPrecision(t){if(this.isValidProps(this.precision))return this.precision;const e=t.toString();if(e.indexOf("e-")>=0)return parseInt(e.slice(e.indexOf("e-")+2),10);let i=0;return e.indexOf(".")>=0&&(i=e.length-e.indexOf(".")-1),i},getMaxPrecision(t,e=1){if(this.isValidProps(this.precision))return this.precision;const{step:i}=this,s=this.getPrecision(e),n=this.getPrecision(i),a=this.getPrecision(t);return t?Math.max(a,s+n):s+n},getPrecisionFactor(t,e=1){const i=this.getMaxPrecision(t,e);return Math.pow(10,i)},getInputDisplayValue(){const{focused:t,inputValue:e,sValue:i}=this;let s;s=t?e:this.toPrecisionAsStep(i),void 0!==s&&null!==s||(s="");let n=this.formatWrapper(s);return this.isValidProps(this.$props.decimalSeparator)&&(n=n.toString().replace(".",this.$props.decimalSeparator)),n},formatWrapper(t){return this.formatter?this.formatter(t):t},toPrecisionAsStep(t){if(this.isNotCompleteNumber(t)||""===t)return t;const e=Math.abs(this.getMaxPrecision(t));return isNaN(e)?t.toString():Number(t).toFixed(e)},upStep(t,e=1){console.log("+ step");const{step:i}=this,s=this.getPrecisionFactor(t,e),n=Math.abs(this.getMaxPrecision(t,e)),a=((s*t+s*i*e)/s).toFixed(n),u=this.toNumber(a);return console.log("+ step",u),this.inputDisplayValue=this.getInputDisplayValue(),this.inputValue=u,console.log("+ step",u,this.getInputDisplayValue()),this.$emit("change",u),this.toNumber(a)},downStep(t,e=1){console.log("- step");const{step:i}=this,s=this.getPrecisionFactor(t,e),n=Math.abs(this.getMaxPrecision(t,e)),a=((s*t-s*i*e)/s).toFixed(n),u=this.toNumber(a);return this.inputDisplayValue=this.getInputDisplayValue(),this.inputValue=u,this.$emit("change",u),this.toNumber(a)},isNotCompleteNumber(t){return isNaN(t)||""===t||null===t||t&&t.toString().indexOf(".")===t.toString().length-1},toNumber(t){const{precision:e,autoFocus:i}=this,{focused:s=i}=this,n=t&&t.length>16&&s;return this.isNotCompleteNumber(t)||n?t:this.isValidProps(e)?Math.round(t*Math.pow(10,e))/Math.pow(10,e):Number(t)},getValueFromEvent(t){let e=t.target.value.trim().replace(/。/g,".");return this.isValidProps(this.decimalSeparator)&&(e=e.replace(this.decimalSeparator,".")),e},getValidValue(t,e=this.min,i=this.max){let s=parseFloat(t,10);return isNaN(s)?t:(s<e&&(s=e),s>i&&(s=i),s)},onChange(t){console.log("onChange",t),this.focused&&(this.inputting=!0),this.rawInput=this.parser(this.getValueFromEvent(t)),console.log("onChange",this.rawInput),this.inputValue=this.rawInput,this.$emit("change",this.toNumber(this.rawInput))},onBlur(...t){console.log("onBlur",this,this.$listeners),this.inputting=!1,this.focused=!1;const e=this.getCurrentValidValue(this.inputValue),i=this.setValue(e);if(this.$listeners.blur){const e=this.$refs.inputRef.value,s=this.getInputDisplayValue({focused:!1,sValue:i});this.$refs.inputRef.value=s,this.$emit("blur",...t),this.$refs.inputRef.value=e}},getCurrentValidValue(t){let e=t;return e=""===e?"":this.isNotCompleteNumber(parseFloat(e,10))?this.sValue:this.getValidValue(e),this.toNumber(e)},setValue(t,e){const{precision:i}=this.$props,s=this.isNotCompleteNumber(parseFloat(t,10))?null:parseFloat(t,10),{sValue:n=null,inputValue:a=null}=this.$data,u="number"===typeof s?s.toFixed(i):""+s,r=s!==n||u!==""+a;return this.value?(this.sValue=s,this.inputValue=this.toPrecisionAsStep(t)):this.inputValue=this.toPrecisionAsStep(this.sValue),r&&this.$emit("change",s),s},getValue(){return console.log("get ...",this.format),this.format?this.format(this.value):this.value}},updated(){console.log("aaaaa");const{value:t,max:e,min:i}=this.$props,{focused:s}=this.$data,{prevProps:n}=this,a=this.$props;if(n){if(!r(n.value,t)||!r(n.max,e)||!r(n.min,i)){const e=s?t:this.getValidValue(t);let i;i=this.pressingUpOrDown?e:this.inputting?this.rawInput:this.toPrecisionAsStep(e),this.sValue=e,this.inputValue=i}const u="value"in a?t:this.sValue;"max"in a&&n.max!==e&&"number"===typeof u&&u>e&&this.$emit("change",e),"min"in a&&n.min!==i&&"number"===typeof u&&u<i&&this.$emit("change",i)}this.prevProps={...a},this.$nextTick(()=>{})},watch:{value:{immediate:!0,handler(t){console.log("watch ...",t);const e=this.getValidValue(this.toNumber(t));this.sValue=e,this.inputValue=this.toPrecisionAsStep(e),this.inputDisplayValue=this.getInputDisplayValue(),console.log("watch ...",this.inputDisplayValue,this.inputValue,this.sValue),this.$emit("change",e)}}}},l=o,p=(i("8505"),i("2877")),h=Object(p["a"])(l,a,u,!1,null,"244ebe8d",null),c=h.exports,m={components:{MyInputNumber:c},data(){return{inputNumberValue:0}},methods:{formatNumber(t){return"$"+t.toFixed(2)},change(t){console.log("change ...",t)}}},d=m,g=(i("b976"),Object(p["a"])(d,s,n,!1,null,"c304d0ac",null));e["default"]=g.exports},fbe0:function(t,e,i){}}]);
//# sourceMappingURL=AInputNumber.4a05a2e8.js.map